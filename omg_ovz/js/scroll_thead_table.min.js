"use strict";var tables,tablesPositions=[];function getCoords(t){var e=t.getBoundingClientRect(),i=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||i.scrollTop,n=window.pageXOffset||o.scrollLeft||i.scrollLeft,a=o.clientTop||i.clientTop||0,l=o.clientLeft||i.clientLeft||0;return{top:e.top+s-a,left:e.left+n-l,height:e.height,width:e.width}}function getPositionsTables(){tables.each(function(t,e){$(e).attr("data-table-id",t),tablesPositions[t]=getCoords(e);var i=$(e).closest(".vikon-responsive-table")[0];tablesPositions[t].left+=i.pageXOffset||i.scrollLeft,tablesPositions[t].theadHeight=getCoords($(e).find("thead:first")[0]).height})}function setContainers(){$(".container-thead").remove(),tables.each(function(t,e){var i=[],o=$(e).find("thead");$(o).find("tr").each(function(t,e){i[t]=[],$(e).find("th").each(function(e,o){i[t][e]={width:getCoords(o).width,text:$(o).html(),fontSize:$(o).css("font-size"),fontFamily:$(o).css("font-family"),color:$(o).css("color"),backgroundColor:$(o).css("background-color"),verticalAlign:$(o).css("vertical-align")}})});var s=document.createElement("thead");s.innerHTML=$(o).html(),$(s).find("tr").each(function(t,e){$(e).find("th").each(function(e,o){var s=i[t][e];$(o).css({"font-size":s.fontSize,"font-family":s.fontFamily,width:s.width,"min-width":s.width,"max-width":s.width,color:s.color,"background-color":s.backgroundColor,"vertical-align":s.verticalAlign})})});var n=document.createElement("table");n.className="table table-bordered table-condensed",n.style.cssText="margin-bottom: 0",n.innerHTML=$(s).html();var a=document.createElement("div");a.className="container-thead";var l=tablesPositions[t].left;a.style.cssText="position: fixed; top: 0; left: "+l+"px; background-color: #fff; border-bottom: 1px solid #000; display: none;",a.setAttribute("data-table-id",t),$(a).html(n),$("body").append(a)})}function showHideThead(){$(".container-thead").hide();var t=window.pageYOffset||document.documentElement.scrollTop,e=window.pageXOffset||document.documentElement.scrollLeft;tables.each(function(i,o){var s=o.closest("div.vikon-responsive-table"),n=s.pageXOffset||s.scrollLeft;if(tablesPositions[i].top<t&&tablesPositions[i].top+tablesPositions[i].height-tablesPositions[i].theadHeight>t){var a=$('div[data-table-id="'+i+'"]');a.css("left",tablesPositions[i].left-e-n),a.show()}})}function initScrollTheadTable(){isAccessability()||(tables=$(".table-scroll-thead:visible"),getPositionsTables(),setContainers(),showHideThead())}function isAccessability(){if(window.sessionStorage){var t=window.sessionStorage.getItem("accessability");return null!==t&&"0"!==t}return!0}$(document).on("DOMContentLoaded",function(){initScrollTheadTable()}),$('a[data-toggle="tab"]').on("hidden.bs.tab",function(t){initScrollTheadTable()}),$(window).on("resize",function(){isAccessability()||(getPositionsTables(),setContainers(),showHideThead())}),$(window).on("scroll",function(){isAccessability()||showHideThead()}),$(document).on("click","a.showpart-btn-list",function(){isAccessability()||(getPositionsTables(),setContainers(),showHideThead())}),$(".vikon-responsive-table").on("scroll",function(){if(!isAccessability()){var t=$(this).find("table:first").data("table-id"),e=this.pageXOffset||this.scrollLeft;$('div[data-table-id="'+t+'"]').css("left",tablesPositions[t].left-e)}}),$("a.accessability").on("accessability",function(){isAccessability()||(getPositionsTables(),setContainers(),showHideThead())});